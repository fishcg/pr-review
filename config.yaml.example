# PR Review Service Configuration

# AI Service URL (required)
# 填写你的 AI 服务地址
ai_api_url: "http://127.0.0.1:3128/chat/completions"

# AI API Key (required for AI service authentication)
# 填写你的 AI API Key
ai_api_key: "sk-xxxxxxxxxxxxxxxxxxxxx"

# AI Model name (default: qwen-plus-latest)
ai_model: "qwen-plus-latest"

# Service port (default: 7995)
port: "7995"

# ===== VCS Provider Configuration =====
# VCS Provider: "github" or "gitlab" (default: github)
# 选择版本控制系统: github 或 gitlab
vcs_provider: "github"

# ===== GitHub Configuration =====
# GitHub Personal Access Token (required when vcs_provider=github)
# Needs permissions: repo (for private repos) or public_repo (for public repos)
# 创建 GitHub Token: https://github.com/settings/tokens
github_token: "ghp_xxxxxxxxxxxxxxxxxxxxx"

# GitHub Webhook Secret (optional, but recommended for security)
# 用于验证 webhook 请求的签名，建议使用随机字符串
# 如果不填写，则不验证签名（不安全）
webhook_secret: ""

# ===== GitLab Configuration =====
# GitLab Personal Access Token (required when vcs_provider=gitlab)
# Needs scopes: api, read_api, write_repository
# 创建 GitLab Token: https://gitlab.com/-/profile/personal_access_tokens
gitlab_token: "glpat-xxxxxxxxxxxxxxxxxxxxx"

# GitLab Instance URL (default: https://gitlab.com)
# 私有部署填写完整地址，如: https://gitlab.company.com
# 公网版本可以留空或填写 https://gitlab.com
gitlab_base_url: ""

# GitLab Webhook Token (optional, but recommended for security)
# 用于验证 webhook 请求的 token
gitlab_webhook_token: ""

# ===== Review Settings =====
# Inline issue comments mode (default: false)
# 开启后，问题会拆分成行内评论，PR 大评论只保留评分/修改点/总结
inline_issue_comment: false

# Comment only on changed lines (default: false)
# 开启后，只对修改的代码行（+/-）发布行内评论，不对未修改的上下文行评论
# 注意：GitLab 因为 API 限制，无论此配置如何都不会对上下文行评论
comment_only_changes: false

# AI Review Prompts
# System prompt - defines the AI's role and behavior
system_prompt: |
  你是一个专业的代码审查助手。
  审查重点：Bug、安全漏洞、性能问题、代码规范。
  保持简洁、客观、建设性，用中文回复。
  Code Review 要点：
  1. **逻辑错误与 Bug**：是否存在潜在的逻辑漏洞、边界条件处理不当或空指针风险？
  2. **代码质量与可读性**：是否遵循 Clean Code 原则？变量命名是否清晰？函数是否过长？是否有冗余代码？
  3. **性能优化**：是否存在不必要的循环、内存泄露或可以优化的算法复杂度？
  4. **安全性**：是否存在常见的安全漏洞（如 SQL 注入、XSS、敏感信息泄露、不安全的加密等）？
  5. **可测试性**：代码是否易于编写单元测试？是否实现了关注点分离？
  6. **最佳实践**：是否符合该编程语言/框架的主流社区最佳实践？
  7. **文档与注释**：是否有必要的注释和文档？注释是否准确反映代码意图？
  8. 如果代码中有写得棒的地方，也请顺带表扬。

# User prompt template - the actual review request
# Use {diff} as placeholder for the code diff
user_prompt_template: |
  审查以下代码变更，用 makrdown 格式输出。
  问题表格必须包含旧行号与新行号两列，并补充触发问题的代码片段（用于定位，必须是 diff 中的单行原文，不允许省略号/多行）：
  - 新增行：旧行号写 "-"，新行号填实际行号
  - 删除行：新行号写 "-"，旧行号填实际行号
  - 修改行：旧/新行号都填
  给出简洁的反馈如下，注意下面的括号为输出注意事项，不需要输出：
  
  ### 评分: 95（打分标准不要输出：满分 100，严重bug<60，有语法错误=0，轻微问题扣5-10分）
  
  ### 修改点:
  - xxxx
  - xxxx

  ### 问题:
  （用表格输出。类别为：lint、bug、enhance）
  ｜文件名｜旧行号｜新行号｜代码片段｜ 严重程度 ｜ 类别｜ 问题描述 ｜ 建议修改

  ### 总结: 一句话评价，是否建议合入（建议合入时打✅标记，否则打❌）

  ---
  代码变更:
  ```diff
  {diff}
  ```
